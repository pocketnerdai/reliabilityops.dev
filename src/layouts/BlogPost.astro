---
import type { CollectionEntry } from 'astro:content';
import BaseHead from '../components/BaseHead.astro';
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';
import FormattedDate from '../components/FormattedDate.astro';
import { Image } from 'astro:assets';

type Props = CollectionEntry<'blog'>['data'];

const { title, description, pubDate, updatedDate, heroImage } = Astro.props;
---

<html lang="en">
	<head>
		<BaseHead title={title} description={description} />
		<style>
			html {
				scroll-behavior: smooth;
			}
		</style>
	</head>

	<body>
		<Header />
		<main class="min-h-screen bg-slate-900 pt-20">
			<article>
				<!-- Hero Image -->
				{heroImage && (
					<div class="w-full max-w-6xl mx-auto px-4 mb-8">
						<Image 
							width={1200} 
							height={600} 
							src={heroImage} 
							alt={title}
							class="w-full h-auto rounded-xl shadow-2xl"
						/>
					</div>
				)}
				
				<!-- Article Content -->
				<div class="container mx-auto px-4 py-8 max-w-4xl">
					<!-- Title Section -->
					<div class="text-center mb-8">
						<div class="text-slate-400 mb-4">
							<FormattedDate date={pubDate} />
							{
								updatedDate && (
									<div class="text-sm italic mt-2">
										Last updated on <FormattedDate date={updatedDate} />
									</div>
								)
							}
						</div>
						<h1 class="text-4xl md:text-5xl font-bold text-white mb-4">{title}</h1>
						<p class="text-xl text-slate-300">{description}</p>
					</div>
					
					<hr class="border-slate-700 mb-8" />
					
					<!-- Article Body -->
					<div class="prose prose-lg prose-invert prose-slate max-w-none
						prose-headings:text-white 
						prose-h2:text-3xl prose-h2:font-bold prose-h2:mt-8 prose-h2:mb-4
						prose-h3:text-2xl prose-h3:font-semibold prose-h3:mt-6 prose-h3:mb-3
						prose-p:text-slate-300 prose-p:mb-4 prose-p:leading-relaxed
						prose-a:text-emerald-400 prose-a:no-underline hover:prose-a:text-emerald-300
						prose-strong:text-white prose-strong:font-semibold
						prose-code:text-emerald-400 prose-code:bg-slate-800 prose-code:px-1.5 prose-code:py-0.5 prose-code:rounded
						prose-pre:bg-slate-800 prose-pre:border prose-pre:border-slate-700
						prose-blockquote:border-l-4 prose-blockquote:border-emerald-500 prose-blockquote:pl-4 prose-blockquote:italic
						prose-ul:text-slate-300 prose-li:text-slate-300
						prose-img:rounded-lg prose-img:shadow-xl">
						<slot />
					</div>
					
					<!-- Navigation -->
					<div class="mt-16 pt-8 border-t border-slate-700">
						<a href="/blog" class="text-emerald-400 hover:text-emerald-300 transition-colors flex items-center gap-2">
							<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
								<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
							</svg>
							Back to Blog
						</a>
					</div>
				</div>
			</article>
		</main>
		<Footer />
	</body>
</html>
